/*! 
	jQuery easySelect 1.1.1 - http://tameraydin.github.com/jquery-easyselect/
*/

!function(a){"use strict";a.easySelect=function(b,c){var d=this,e=a(b),f=e.children("option"),g=a('<div class="easyselect-container"></div>'),h=a('<div class="easyselect-field-wrapper"></div>'),i=a('<input class="easyselect-field" type="text">'),j=a('<div class="easyselect-box"></div>'),k=a('<ul class="easyselect-list"></ul>'),l=a('<div class="easyselect-list-wrapper"></div>'),m={maxOption:0,removeIcon:"<span>&nbsp;&#x2716;</span>",onKeyup:null},n={clear:function(){n.items.active=0,n.items.collection=null,k.children("li").removeClass("active filtered")},filter:function(b){var c=0,e=0;k.children("li").removeClass("active").each(function(){-1!=a(this).text().toUpperCase().indexOf(b.toUpperCase())&&(d.settings.maxOption<1||e<d.settings.maxOption)&&(a(this).addClass("filtered"),0===c&&(a(this).addClass("active"),c++),e++)})},generate:function(b){var c="",g="";b&&(f=e.children("option")),f.each(function(){a(this).is(":selected")?g+='<a href="" class="easyselect-box-item" data-value="'+a(this).val()+'">'+a(this).text()+d.settings.removeIcon+"</a>":c+='<li data-value="'+a(this).val()+'">'+a(this).text()+"</li>"}),g?j.removeClass("empty"):j.addClass("empty"),j.html(g),j.children(".easyselect-box-item").bind("click",o.removeItem),k.html(c),k.children("li").bind("click",n.items.onClick).bind("mouseenter",n.items.onHover)},items:{active:0,collection:0,count:0,get:function(){n.items.collection=k.children(".filtered"),n.items.count=n.items.collection.length},set:function(){n.items.collection.removeClass("active"),n.items.collection.eq(n.items.active).addClass("active")},move:function(a){n.items.collection||n.items.get(),a?n.items.active<n.items.count-1?n.items.active++:n.items.active=0:n.items.active>0?n.items.active--:n.items.active=n.items.count-1,n.items.set()},onClick:function(){o.addItem(a(this).attr("data-value"))},onHover:function(){n.items.collection||n.items.get(),n.items.active=a(this).index(".filtered"),n.items.set()}}},o={addItem:function(b){a.prop?f.filter("[value="+b+"]").prop("selected",!0):f.filter("[value="+b+"]").attr("selected","selected"),i.val(""),n.generate()},removeItem:function(b){b.preventDefault(),f.filter("[value="+a(this).attr("data-value")+"]").removeAttr("selected"),a(this).remove(),n.generate()}},p={checkValue:function(){f.each(function(){return a(this).text().toUpperCase()!==i.val().toUpperCase()||a(this).is(":selected")?void 0:void o.addItem(a(this).val())})},onKeypress:function(a){13==a.which&&a.preventDefault()},onKeyup:function(b){switch(b.which){case 13:var c=k.children(".active").attr("data-value");c?o.addItem(c):p.checkValue();break;case 27:n.clear();break;case 38:n.items.move(0);break;case 40:n.items.move(1);break;default:n.clear(),a(this).val()&&("function"==typeof d.settings.onKeyup?d.settings.onKeyup():n.filter(a(this).val()))}}};d.settings={},d.init=function(){d.settings=a.extend({},m,c),g.append(h,j),e.hide().after(g),h.append(i).css("width",i.outerWidth()),h.append(l.append(k)),n.generate(),i.bind("blur",function(){setTimeout(function(){n.clear()},100)}),i.bind("focus keyup",p.onKeyup),i.bind("keypress",p.onKeypress)},d.refresh=function(){n.generate(!0)},d.init()},a.fn.easySelect=function(b){return this.each(function(){a.data(this,"easySelect")||a.data(this,"easySelect",new a.easySelect(this,b))})}}(jQuery,window,document);